<h1>Courses</h1>

<% form_tag '/courses', :method => :get do -%>
    <%= text_field_tag 'search', h(params[:search]) %> <%= submit_tag 'Submit', :name => nil %>
<% end -%>

<% if @courses.nil? %>
  <div>Instructions: use the search box</div>
<% else %>
  Searching for: <%= (params[:search].empty? ? 'All courses' : h(params[:search]) ) %><p/>

  <table>
  <% for course in @courses %>
    <tr id="<%=course.id%>main" class="main">
      <td><a href="javascript:void(0)" onclick="this.innerHTML = toggle('<%=course.id%>')">+</a></td>
      <td><%= course.subject%><%=course.number%></td>
      <td><%=course.name%></td>
    </tr>
    <tr id="<%=course.id%>extra" class="extra">
      <td colspan=3><%=course.description%></td>
    </tr>
  <% end -%>
  </table>
  <br/>
  Courses for: <%= Semester.find(session[:semester]).name %> <br/>

<% end %>
